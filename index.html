<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PhotoStudio Pro v2.0 - 专业照片美化</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <h1 class="logo">PhotoStudio Pro</h1>
                <span class="version">v2.0</span>
            </div>
            <div class="header-center">
                <button id="compareToggle" class="header-btn" title="对比原图 (空格)">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" />
                        <line x1="12" y1="3" x2="12" y2="21" />
                    </svg>
                    <span>对比</span>
                </button>
                <button id="undoBtn" class="header-btn" title="撤销 (Ctrl+Z)">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 10h10a5 5 0 0 1 5 5v0a5 5 0 0 1-5 5H6" />
                        <polyline points="8,5 3,10 8,15" />
                    </svg>
                </button>
                <button id="redoBtn" class="header-btn" title="重做 (Ctrl+Y)">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10H11a5 5 0 0 0-5 5v0a5 5 0 0 0 5 5h7" />
                        <polyline points="16,5 21,10 16,15" />
                    </svg>
                </button>
            </div>
            <div class="header-right">
                <button id="mobileAdjustBtn" class="header-btn mobile-only">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="4" y1="21" x2="4" y2="14" />
                        <line x1="4" y1="10" x2="4" y2="3" />
                        <line x1="12" y1="21" x2="12" y2="12" />
                        <line x1="12" y1="8" x2="12" y2="3" />
                        <line x1="20" y1="21" x2="20" y2="16" />
                        <line x1="20" y1="12" x2="20" y2="3" />
                        <line x1="1" y1="14" x2="7" y2="14" />
                        <line x1="9" y1="8" x2="15" y2="8" />
                        <line x1="17" y1="16" x2="23" y2="16" />
                    </svg>
                </button>
                <button id="mobilePresetBtn" class="header-btn mobile-only">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7" />
                        <rect x="14" y="3" width="7" height="7" />
                        <rect x="14" y="14" width="7" height="7" />
                        <rect x="3" y="14" width="7" height="7" />
                    </svg>
                </button>
                <button id="exportBtn" class="export-btn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                        <polyline points="7,10 12,15 17,10" />
                        <line x1="12" y1="15" x2="12" y2="3" />
                    </svg>
                    <span>导出</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Left Panel - Adjustments -->
            <aside class="panel panel-left" id="leftPanel">
                <div class="panel-header">
                    <h2>调整</h2>
                    <button class="panel-close mobile-only" data-close="left">×</button>
                </div>
                <div class="panel-content">
                    <!-- Basic Adjustments -->
                    <div class="adjust-section">
                        <div class="section-header">
                            <h3>基础调整</h3>
                            <button class="reset-btn" id="resetBasic">重置</button>
                        </div>
                        <div class="slider-group">
                            <div class="slider-item">
                                <label>曝光</label>
                                <div class="slider-track" data-slider="exposure">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="exposure">0</span>
                            </div>
                            <div class="slider-item">
                                <label>对比度</label>
                                <div class="slider-track" data-slider="contrast">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="contrast">0</span>
                            </div>
                            <div class="slider-item">
                                <label>高光</label>
                                <div class="slider-track" data-slider="highlights">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="highlights">0</span>
                            </div>
                            <div class="slider-item">
                                <label>阴影</label>
                                <div class="slider-track" data-slider="shadows">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="shadows">0</span>
                            </div>
                            <div class="slider-item">
                                <label>白色</label>
                                <div class="slider-track" data-slider="whites">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="whites">0</span>
                            </div>
                            <div class="slider-item">
                                <label>黑色</label>
                                <div class="slider-track" data-slider="blacks">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="blacks">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Color Adjustments -->
                    <div class="adjust-section">
                        <div class="section-header">
                            <h3>色彩调整</h3>
                        </div>
                        <div class="slider-group">
                            <div class="slider-item">
                                <label>色温</label>
                                <div class="slider-track" data-slider="temperature">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="temperature">0</span>
                            </div>
                            <div class="slider-item">
                                <label>色调</label>
                                <div class="slider-track" data-slider="tint">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="tint">0</span>
                            </div>
                            <div class="slider-item">
                                <label>自然饱和度</label>
                                <div class="slider-track" data-slider="vibrance">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="vibrance">0</span>
                            </div>
                            <div class="slider-item">
                                <label>饱和度</label>
                                <div class="slider-track" data-slider="saturation">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="saturation">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Details -->
                    <div class="adjust-section">
                        <div class="section-header">
                            <h3>细节优化</h3>
                        </div>
                        <div class="slider-group">
                            <div class="slider-item">
                                <label>清晰度</label>
                                <div class="slider-track" data-slider="clarity">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="clarity">0</span>
                            </div>
                            <div class="slider-item">
                                <label>去雾</label>
                                <div class="slider-track" data-slider="dehaze">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="dehaze">0</span>
                            </div>
                            <div class="slider-item">
                                <label>锐化</label>
                                <div class="slider-track" data-slider="sharpen">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="sharpen">0</span>
                            </div>
                            <div class="slider-item">
                                <label>暗角</label>
                                <div class="slider-track" data-slider="vignette">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="vignette">0</span>
                            </div>
                            <div class="slider-item">
                                <label>颗粒</label>
                                <div class="slider-track" data-slider="grain">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="grain">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- Curve Editor -->
                    <div class="adjust-section">
                        <div class="section-header">
                            <h3>曲线</h3>
                            <button class="reset-btn" id="resetCurve">重置</button>
                        </div>
                        <div class="curve-channels">
                            <button class="curve-channel active" data-curve="rgb">RGB</button>
                            <button class="curve-channel" data-curve="red">红</button>
                            <button class="curve-channel" data-curve="green">绿</button>
                            <button class="curve-channel" data-curve="blue">蓝</button>
                        </div>
                        <div class="curve-editor">
                            <canvas id="curveCanvas" width="256" height="256"></canvas>
                        </div>
                        <div class="curve-presets">
                            <button class="curve-preset" data-preset="linear">线性</button>
                            <button class="curve-preset" data-preset="contrast">对比</button>
                            <button class="curve-preset" data-preset="fade">褪色</button>
                            <button class="curve-preset" data-preset="film">胶片</button>
                            <button class="curve-preset" data-preset="punch">强力</button>
                            <button class="curve-preset" data-preset="vintage">复古</button>
                        </div>
                    </div>

                    <!-- HSL Adjustments -->
                    <div class="adjust-section collapsible">
                        <div class="section-header" data-toggle="hsl">
                            <h3>HSL 调整</h3>
                            <button class="reset-btn" id="resetHSL">重置</button>
                            <span class="collapse-icon">▼</span>
                        </div>
                        <div class="collapsible-content" id="hslContent">
                            <div class="hsl-tabs">
                                <button class="hsl-tab active" data-type="hue">色相</button>
                                <button class="hsl-tab" data-type="sat">饱和度</button>
                                <button class="hsl-tab" data-type="lum">明度</button>
                            </div>
                            <div class="hsl-sliders" id="hslSliders">
                                <!-- Generated by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Color Palette (Huawei Style) -->
                    <div class="adjust-section">
                        <div class="section-header">
                            <h3>调色盘</h3>
                            <button class="reset-btn" id="resetPalette">重置</button>
                        </div>
                        <div class="color-palette-container">
                            <div class="color-wheel-wrapper">
                                <canvas id="colorWheelCanvas" width="200" height="200"></canvas>
                                <div class="color-indicator" id="colorIndicator"></div>
                                <div class="vertical-slider-container">
                                    <div class="vertical-slider-item">
                                        <label>亮度</label>
                                        <div class="vertical-slider-track" data-slider="wheelLightness">
                                            <div class="vertical-slider-fill"></div>
                                            <div class="vertical-slider-thumb"></div>
                                        </div>
                                        <span class="slider-value" data-value="wheelLightness">50</span>
                                    </div>
                                </div>
                            </div>
                            <div class="color-preview-panel">
                                <div class="selected-color" id="selectedColor"></div>
                                <div class="color-values">
                                    <span id="colorHex">#FF5733</span>
                                    <span id="colorRGB">RGB(255,87,51)</span>
                                </div>
                            </div>
                            <div class="palette-sliders">
                                <div class="slider-item">
                                    <label>色相偏移</label>
                                    <div class="slider-track" data-slider="paletteHue">
                                        <div class="slider-fill"></div>
                                        <div class="slider-thumb"></div>
                                    </div>
                                    <span class="slider-value" data-value="paletteHue">0</span>
                                </div>
                                <div class="slider-item">
                                    <label>饱和度增强</label>
                                    <div class="slider-track" data-slider="paletteSat">
                                        <div class="slider-fill"></div>
                                        <div class="slider-thumb"></div>
                                    </div>
                                    <span class="slider-value" data-value="paletteSat">0</span>
                                </div>
                            </div>
                        </div>

                        <!-- Personal Color Cards (Huawei Style) -->
                        <div class="color-cards-section">
                            <h4>个性色卡</h4>
                            <div class="color-cards-grid" id="colorCardsGrid">
                                <!-- Generated by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Split Toning -->
                    <div class="adjust-section collapsible">
                        <div class="section-header" data-toggle="split">
                            <h3>色彩分离</h3>
                            <button class="reset-btn" id="resetSplit">重置</button>
                            <span class="collapse-icon">▼</span>
                        </div>
                        <div class="collapsible-content" id="splitContent">
                            <div class="split-tone-row">
                                <label>高光色彩</label>
                                <div class="color-picker-wrapper">
                                    <input type="color" id="highlightColor" value="#ffaa00">
                                    <div class="color-display" id="highlightDisplay"></div>
                                </div>
                            </div>
                            <div class="slider-item">
                                <label>高光强度</label>
                                <div class="slider-track" data-slider="highlightTone">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="highlightTone">0</span>
                            </div>
                            <div class="split-tone-row">
                                <label>阴影色彩</label>
                                <div class="color-picker-wrapper">
                                    <input type="color" id="shadowColor" value="#0066ff">
                                    <div class="color-display" id="shadowDisplay"></div>
                                </div>
                            </div>
                            <div class="slider-item">
                                <label>阴影强度</label>
                                <div class="slider-track" data-slider="shadowTone">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="shadowTone">0</span>
                            </div>
                            <div class="slider-item">
                                <label>平衡</label>
                                <div class="slider-track" data-slider="toneBalance">
                                    <div class="slider-fill"></div>
                                    <div class="slider-thumb"></div>
                                </div>
                                <span class="slider-value" data-value="toneBalance">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Canvas Area -->
            <div class="canvas-container">
                <div class="canvas-wrapper" id="canvasWrapper">
                    <canvas id="imageCanvas"></canvas>
                    <div class="canvas-overlay" id="canvasOverlay">
                        <div class="upload-prompt">
                            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="1.5">
                                <rect x="3" y="3" width="18" height="18" rx="2" />
                                <circle cx="8.5" cy="8.5" r="1.5" />
                                <polyline points="21,15 16,10 5,21" />
                            </svg>
                            <p>拖放图片到此处</p>
                            <p class="hint">或点击选择文件</p>
                            <input type="file" id="fileInput" accept="image/*" hidden>
                        </div>
                    </div>
                </div>
                <div class="canvas-controls">
                    <button id="zoomOut" class="zoom-btn" title="缩小">−</button>
                    <span id="zoomLevel">100%</span>
                    <button id="zoomIn" class="zoom-btn" title="放大">+</button>
                    <button id="zoomFit" class="zoom-btn" title="适应窗口">适应</button>
                </div>
            </div>

            <!-- Right Panel - Presets -->
            <aside class="panel panel-right" id="rightPanel">
                <div class="panel-header">
                    <h2>预设</h2>
                    <button class="panel-close mobile-only" data-close="right">×</button>
                </div>
                <div class="panel-content">
                    <!-- Category Filter -->
                    <div class="category-filter">
                        <button class="category-btn active" data-category="all">全部</button>
                        <button class="category-btn" data-category="filter">滤镜</button>
                        <button class="category-btn" data-category="film">胶片</button>
                        <button class="category-btn" data-category="bw">黑白</button>
                    </div>

                    <!-- Search -->
                    <div class="search-box">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <circle cx="11" cy="11" r="8" />
                            <line x1="21" y1="21" x2="16.65" y2="16.65" />
                        </svg>
                        <input type="text" id="presetSearch" placeholder="搜索预设...">
                    </div>

                    <!-- Intensity Slider -->
                    <div class="intensity-control">
                        <label>效果强度</label>
                        <div class="slider-track" data-slider="intensity">
                            <div class="slider-fill"></div>
                            <div class="slider-thumb"></div>
                        </div>
                        <span class="slider-value" data-value="intensity">100</span>
                    </div>

                    <!-- Filters Section -->
                    <div class="preset-section" data-type="filter">
                        <h3>滤镜效果</h3>
                        <div class="filter-grid" id="filterGrid">
                            <!-- Generated by JS -->
                        </div>
                    </div>

                    <!-- Film Presets with V1.0 Style -->
                    <div class="preset-section" data-type="film">
                        <h3>富士 Fujifilm</h3>
                        <div class="film-grid" id="fujiGrid">
                            <!-- Film cards will be generated by JavaScript -->
                        </div>
                    </div>

                    <div class="preset-section" data-type="film">
                        <h3>柯达 Kodak</h3>
                        <div class="film-grid" id="kodakGrid">
                            <!-- Film cards will be generated by JavaScript -->
                        </div>
                    </div>

                    <div class="preset-section" data-type="film">
                        <h3>哈苏 Hasselblad</h3>
                        <div class="film-grid" id="hasselbladGrid">
                            <!-- Film cards will be generated by JavaScript -->
                        </div>
                    </div>

                    <div class="preset-section" data-type="film">
                        <h3>依尔福 Ilford</h3>
                        <div class="film-grid" id="ilfordGrid">
                            <!-- Film cards will be generated by JavaScript -->
                        </div>
                    </div>

                    <div class="preset-section" data-type="film">
                        <h3>爱克发 Agfa</h3>
                        <div class="film-grid" id="agfaGrid">
                            <!-- Film cards will be generated by JavaScript -->
                        </div>
                    </div>

                    <div class="preset-section" data-type="film">
                        <h3>电影胶片 Cinematic</h3>
                        <div class="film-grid" id="cinematicGrid">
                            <!-- Film cards will be generated by JavaScript -->
                        </div>
                    </div>

                    <div class="preset-section" data-type="film">
                        <h3>Lomography</h3>
                        <div class="film-grid" id="lomoGrid">
                            <!-- Film cards will be generated by JavaScript -->
                        </div>
                    </div>

                    <div class="preset-section" data-type="film">
                        <h3>宝丽来 Polaroid</h3>
                        <div class="film-grid" id="polaroidGrid">
                            <!-- Film cards will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Mobile Overlay -->
        <div class="panel-overlay" id="panelOverlay"></div>

        <!-- Loading -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
            <p>处理中...</p>
        </div>
    </div>

    <script src="app.js"></script>
</body>

</html>